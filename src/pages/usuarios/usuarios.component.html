<div class="usuarios-wrapper">
  <h2>Usuários</h2>

  <div class="filters">
    <input placeholder="Nome" [(ngModel)]="filtros.nome">
    <input placeholder="Login" [(ngModel)]="filtros.login">
    <input placeholder="Email" [(ngModel)]="filtros.email">
    <input placeholder="Departamento Id" [(ngModel)]="filtros.departamentoId" type="number">
    <button (click)="aplicarFiltros()">Filtrar</button>
  </div>

  <div class="controls">
    <label>Page <input type="number" [(ngModel)]="page"></label>
    <label>Size <input type="number" [(ngModel)]="size"></label>
    <label>Sort
      <select [(ngModel)]="sort">
        <option value="nome">nome</option>
        <option value="login">login</option>
        <option value="email">email</option>
      </select>
    </label>
    <label>Dir
      <select [(ngModel)]="dir">
        <option value="asc">asc</option>
        <option value="desc">desc</option>
      </select>
    </label>
    <button (click)="carregar()">Atualizar</button>
  </div>

  <p *ngIf="loading">Carregando...</p>
  <p *ngIf="errorMsg" class="error">{{ errorMsg }}</p>

  <table>
    <thead>
      <tr>
        <th>Nome</th>
        <th>Login</th>
        <th>Email</th>
        <th>Departamento</th>
        <th>Ações</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let u of usuarios">
        <td>{{ u.nome }}</td>
        <td>{{ u.login }}</td>
        <td>{{ u.email }}</td>
        <td>{{ u.departamento?.nome || u.departamentoId }}</td>
        <td><button (click)="remover(u.login)">Remover</button></td>
      </tr>
    </tbody>
  </table>
</div>